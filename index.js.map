{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = 'uHSLi07StIOlriMPxJGxUbSYsHDs6AFx';\naxios.defaults.baseURL = 'https://app.ticketmaster.com/discovery/v2/';\n\nexport async function fetchData(page, value) {\n  const axiosOptions = {\n    params: {\n      apikey: apiKey,\n      page: page,\n      keyword: value,\n    }\n  };\n\n  const response = await axios.get('events.json', axiosOptions);\n  return response.data;\n}","import { list } from '../main';\n\nexport const eventList = eventArray => {\n  const eventMarkup = eventArray\n    .map(\n      ({ name }) => `\n    <li class='listEl'>\n      <p class='list-text'>${name}</p>\n    </li>\n  `\n    )\n    .join('');\n  list.innerHTML = eventMarkup;\n};","// Discovery API (https://developer.ticketmaster.com/products-and-docs/apis/discovery-api/v2/#search-events-v2)\n// Потрібно відрендерити колекцію івентів і реалізувати пагінацію за допомогою бібліотеки\n// tui - pagination (https://www.npmjs.com/package/tui-pagination),\n// Запити робимо використовуючи бібліотеку axios (https://www.npmjs.com/package/axios , https://axios-http.com/uk/docs/intro)\n// і конструкції async/await, try/catch\nimport { fetchData } from './js/pixabay-api.js';\nimport { eventList } from './js/render-functions.js';\nimport Pagination from 'tui-pagination';\n\nexport const list = document.querySelector('.list');\nconst form = document.querySelector('.form');\nlet value = '';\n\n//* pagination\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 20,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nconst pagination = new Pagination('pagination', options);\nconst page = pagination.getCurrentPage();\nfunction reset(totalItems) {\n  pagination.reset(totalItems);\n}\npagination.on('afterMove', event => {\n  const currentPage = event.page;\n  renderEvent(currentPage, value);\n});\n\n//* event\nasync function renderEvent(page, value) {\n  try {\n    const arrayEvent = await fetchData(page, value);\n\n    if (!arrayEvent.page.totalElements) {\n      alert('Try again!');\n      return;\n    }\n\n    if (page === 1) {\n      reset(arrayEvent.page.totalElements);\n    }\n\n    eventList(arrayEvent._embedded.events);\n  } catch (err) {\n    console.log(err);\n  }\n}\nrenderEvent(page, value);\n\n//* form\nconst onFormSubmit = event => {\n  event.preventDefault();\n\n  list.innerHTML = '';\n  value = event.target.elements.input.value;\n  renderEvent(page, value);\n  form.reset();\n};\n\nform.addEventListener('submit', onFormSubmit);"],"names":["apiKey","axios","fetchData","page","value","axiosOptions","eventList","eventArray","eventMarkup","name","list","form","options","pagination","Pagination","reset","totalItems","event","currentPage","renderEvent","arrayEvent","err","onFormSubmit"],"mappings":"6vBAEA,MAAMA,EAAS,mCACfC,EAAM,SAAS,QAAU,6CAElB,eAAeC,EAAUC,EAAMC,EAAO,CAC3C,MAAMC,EAAe,CACnB,OAAQ,CACN,OAAQL,EACR,KAAMG,EACN,QAASC,CACV,CACL,EAGE,OADiB,MAAMH,EAAM,IAAI,cAAeI,CAAY,GAC5C,IAClB,CCdO,MAAMC,EAAYC,GAAc,CACrC,MAAMC,EAAcD,EACjB,IACC,CAAC,CAAE,KAAAE,CAAI,IAAO;AAAA;AAAA,6BAESA,CAAI;AAAA;AAAA,GAG5B,EACA,KAAK,EAAE,EACVC,EAAK,UAAYF,CACnB,ECJaE,EAAO,SAAS,cAAc,OAAO,EAC5CC,EAAO,SAAS,cAAc,OAAO,EAC3C,IAAIP,EAAQ,GAGZ,MAAMQ,EAAU,CACd,WAAY,EACZ,aAAc,GACd,aAAc,EACd,KAAM,EACN,YAAa,GACb,mBAAoB,kBACpB,kBAAmB,iBACnB,SAAU,CACR,KAAM,gDACN,YACE,iEACF,WACE,mGAGF,mBACE,gHAGF,WACE,mGAGH,CACH,EAEMC,EAAa,IAAIC,EAAW,aAAcF,CAAO,EACjDT,EAAOU,EAAW,iBACxB,SAASE,EAAMC,EAAY,CACzBH,EAAW,MAAMG,CAAU,CAC7B,CACAH,EAAW,GAAG,YAAaI,GAAS,CAClC,MAAMC,EAAcD,EAAM,KAC1BE,EAAYD,EAAad,CAAK,CAChC,CAAC,EAGD,eAAee,EAAYhB,EAAMC,EAAO,CACtC,GAAI,CACF,MAAMgB,EAAa,MAAMlB,EAAUC,EAAMC,CAAK,EAE9C,GAAI,CAACgB,EAAW,KAAK,cAAe,CAClC,MAAM,YAAY,EAClB,MACD,CAEGjB,IAAS,GACXY,EAAMK,EAAW,KAAK,aAAa,EAGrCd,EAAUc,EAAW,UAAU,MAAM,CACtC,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CACAF,EAAYhB,EAAMC,CAAK,EAGvB,MAAMkB,EAAeL,GAAS,CAC5BA,EAAM,eAAc,EAEpBP,EAAK,UAAY,GACjBN,EAAQa,EAAM,OAAO,SAAS,MAAM,MACpCE,EAAYhB,EAAMC,CAAK,EACvBO,EAAK,MAAK,CACZ,EAEAA,EAAK,iBAAiB,SAAUW,CAAY"}